<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.care.stay.hotel.HotelMapper">
	<resultMap type="com.care.stay.hotel.HotelDTO" id="HotelDto">
		<id column="no" property="no"/>
		<result column="hcode" property="hcode"/>
		<result column="hname" property="hname"/>
		<result column="hregion" property="hregion"/>
		<result column="hdetailregion" property="hdetailregion"/>
		<result column="hrating" property="hrating"/>
		<result column="haddress" property="haddress"/>
		<result column="hdetailaddress" property="hdetailaddress"/>
		<result column="himage" property="himage"/>
		<result column="hinfo" property="hinfo"/>
		<result column="hcheckintime" property="hcheckintime"/>
		<result column="hcheckouttime" property="hcheckouttime"/>
		<result column="htype" property="htype"/>
		<result column="hpeople" property="hpeople"/>
		<result column="hbedtype" property="hbedtype"/>
	</resultMap> 

	<select id="count">
	  	SELECT count(no) FROM hotel
	</select>

<!-- 	<select id="hotellist" resultMap="HotelDto">  
		SELECT BBB.* 
		FROM (SELECT ROWNUM() as rn, AAA.* 
		FROM (SELECT no, hcode, hname, hregion, hdetailregion, hrating, haddress, hdetailaddress, himage, hinfo, hcheckintime, hcheckouttime, htype, hpeople, hbedtype, 
		FROM hotel ORDER BY no DESC )AAA)BBB
		WHERE BBB.rn BETWEEN #{begin} AND #{end}
	</select> -->
	
<!--  전체 다 나오는 코드인데 처음부터 지역 지정해서 하는 코드로 바꿔보려함! (아래) -->
 	<select id="hotellist" resultMap="HotelDto">
		SELECT BBB.* FROM 
		(SELECT ROWNUM as rn, AAA.* FROM 
		(SELECT no, hcode, hname, hregion, hdetailregion, hrating, haddress, hdetailaddress, 
		himage, hinfo, hcheckintime, hcheckouttime, htype, hpeople, hbedtype 
		FROM hotel ORDER BY no DESC)AAA)BBB
		WHERE BBB.rn BETWEEN #{begin} AND #{end}
	</select> 
	
		<!-- 강동으로 나오게하기  -->
		<select id="Main1_1" resultMap="HotelDto">
		SELECT BBB.* FROM 
		(SELECT ROWNUM as rn, AAA.* FROM 
		(SELECT no, hcode, hname, hregion, hdetailregion, hrating, haddress, hdetailaddress, 
		himage, hinfo, hcheckintime, hcheckouttime, htype, hpeople, hbedtype 
		FROM hotel WHERE hdetailregion = '강동')AAA)BBB
		WHERE BBB.rn BETWEEN #{begin} AND #{end}
	</select> 
	
	
	<!--2차시도 // 잠시보류 -->
	

<!-- <select id="count">
		<choose>
	  		<when test="mainMenu == 'Main1'">
	  			SELECT count(no) FROM hotel WHERE Main1
	  		</when>
	  		<when test="mainMenu == 'Main2'">
	  			SELECT count(no) FROM hotel WHERE Main2
	  		</when>
	  		<otherwise>
	  			SELECT count(no) FROM hotel
	  		</otherwise>
		</choose>
	</select> 
  
	<select id="hotellist" resultMap="HotelDto">
		<choose>
			<when test="mainMenu == 'Main1'">
				SELECT AAA.* FROM 
				(SELECT rownum as rn, no, hcode, hname, hregion, hdetailregion, hrating, haddress, hdetailaddress, 
				himage, hinfo, hcheckintime, hcheckouttime, htype, hpeople, hbedtype
				FROM hotel WHERE hdetailregion = '강동')AAA 
				WHERE AAA.rn BETWEEN #{begin} AND #{end}
			</when>
			<when test="mainMenu == 'Main2'">
				SELECT AAA.* FROM 
				(SELECT rownum as rn, no, hcode, hname, hregion, hdetailregion, hrating, haddress, hdetailaddress, 
				himage, hinfo, hcheckintime, hcheckouttime, htype, hpeople, hbedtype
				FROM hotel WHERE hdetailregion = '인천')AAA 
				WHERE AAA.rn BETWEEN #{begin} AND #{end}
			</when>
			<otherwise>
				SELECT AAA.* FROM 
				(SELECT no, hcode, hname, hregion, hdetailregion, hrating, haddress, hdetailaddress, himage, hinfo, hcheckintime, hcheckouttime, htype, hpeople, hbedtype 
				FROM hotel )AAA 
				WHERE AAA.rn BETWEEN #{begin} AND #{end}
			</otherwise>
		</choose>
	</select> -->
	



</mapper>
